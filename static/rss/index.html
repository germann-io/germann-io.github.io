<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel><title><![CDATA[germann.io]]></title><description><![CDATA[ideas and opinions]]></description><link>https://www.germann.io/</link><image><url>https://www.germann.io/favicon.png</url><title>germann.io</title><link>https://www.germann.io/</link></image><generator>Ghost 3.40</generator><lastBuildDate>Sun, 20 Dec 2020 13:38:18 GMT</lastBuildDate><atom:link href="https://www.germann.io/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[Welcome]]></title><description><![CDATA[Welcome, it's great to have you here.]]></description><link>https://www.germann.io/welcome/</link><guid isPermaLink="false">5fde033e8b330cd31de53870</guid><category><![CDATA[Getting Started]]></category><dc:creator><![CDATA[Fabio Germann]]></dc:creator><pubDate>Sat, 19 Dec 2020 13:42:28 GMT</pubDate><media:content url="https://www.germann.io/content/images/2020/12/IMG_20200606_092041-1.jpg" medium="image"/><content:encoded><![CDATA[<img src="https://www.germann.io/content/images/2020/12/IMG_20200606_092041-1.jpg" alt="Welcome"><p>Great to have you here. Take a look around - feedback is always welcome.</p><p>You will find posts about various topics in and around IT as well as some information about me.</p>]]></content:encoded></item><item><title><![CDATA[Diffusing the Flash "Bomb"]]></title><description><![CDATA[While this may have not have been an unforeseeable step to force companies to adopt more modern frameworks many struggle to update their products in time for the 2021 deadline.]]></description><link>https://www.germann.io/diffusing-the-flash-bomb/</link><guid isPermaLink="false">5fde05308b330cd31de539e6</guid><category><![CDATA[Technical]]></category><category><![CDATA[Post]]></category><dc:creator><![CDATA[Fabio Germann]]></dc:creator><pubDate>Wed, 23 Sep 2020 20:39:00 GMT</pubDate><media:content url="https://www.germann.io/content/images/2020/12/tiles_what_s_newindesign-removalofflash.png" medium="image"/><content:encoded><![CDATA[<img src="https://www.germann.io/content/images/2020/12/tiles_what_s_newindesign-removalofflash.png" alt="Diffusing the Flash "Bomb""><p>A (long) while ago Adobe announced - to the joy of many in our industry - that they will discontinue the support of the Flash Player by 2021. Around the same time all the major browsers announced plans to discontinue integration of the Flash Player. Some already did so well ahead of time (Apple with Safari 14 for example).</p><h3 id="reality-check">Reality check</h3><p>While this may have not have been an unforeseeable step to force companies to adopt more modern frameworks (like Angular) many struggle to update their products in time for the 2021 deadline. While updates of customer facing applications are likely to be completed by beginning of 2021 many internal applications will not be ready in time. Enterprise IT usually contains many applications that will be seen by non-employees. Those system often won't get updated for many months if not years (some may be EOL with no updates at all).</p><p>This was also true for applications that I use on an (almost) daily basis. After a bit of research on this topic there were only a hand full of solutions: ‌‌</p><ul><li>Rewrite the application‌‌</li><li>Hire someone / outsource the rewrite of the application‌‌</li><li>Purchase a custom browser (with a proprietary build of the Flash Player)‌‌</li><li>Use a VM with "hacky" and seriously insecure configuration</li></ul><p>All of those options are not ideal: rewrite would take too long, paying for a rewrite blows the budget, a customer browser would also put a strain on the budget and using a virtual machine has many more drawbacks than just the risks related to security of the work environment.</p><p>There needed to be another solution! And there was!‌</p><p><strong>DISCLAIMER</strong>: <em>USE AT YOUR OWN RISK PLEASE BE AWARE THAT ANY INFORMATION PRESENTED HERE MAY BE CONSIDERED INACCURATE, DANGEROUS OR ILLEGAL DEPENDING ON YOUR LOCATION. ALSO NOTE THAT ANY LICENSES FOR INVOLVED SOFTWARE AND LIBRARIES NEED TO BE CONSIDERED AND FOLLOWED.</em></p><p>A customized, old "Chromium" browser with an outdated version of the PPAPI-Flash-Plugin as well as a custom extension for at least some security.</p><h3 id="building-the-browser">Building the browser</h3><p>As a base I used an old version of the Chromium browser - VCS revision 344925 to be exact. The archived versions can be found here: <a href="https://www.chromium.org/getting-involved/download-chromium">https://www.chromium.org/getting-involved/download-chromium</a></p><p>For simplicity I "transplanted" the PPAPI-Flash-Player which was bundled with a Google Chrome browser. Again I used an older version (50.0.2661.75) which you will undoubltedly find when searching for it on google.</p><p><code>cp -R Chrome.app/Contents/Versions/&lt;VERSION&gt;/Chromium\ Framework.framework/Internet\ Plug-Ins Chromium.app/Contents/Versions/&lt;VERSION&gt;/Chromium\ Framework.framework/</code></p><p>You might ask - with reason - why not just use Google Chrome? Well, Chrome's built-in auto update as well as "phone-home-features" would likely interfere with my plan later on.</p><p>For some reason Chromium could not find the PPAPI-Flash-Player plugin automatically but a CLI option did the trick. This meant that I had to change how the app was started (adding the CLI option to the defaults). On macOS this is done as follows (other OS allow similar configuration).</p><p>In the file <code>Chromium.app/Contents/Info.plist</code> the value for key <code>CFBundleExecutable</code> needed to be changed. For simplicity I created a new launcher script in <code>Chromium.app/Contents/MacOS/launcher</code> (don't forget to mark is as executable) with the content:</p><!--kg-card-begin: markdown--><pre><code>#!/bin/sh
RealBin=&quot;Chromium&quot;
AppDir=&quot;$(dirname &quot;$0&quot;)&quot;
exec &quot;$AppDir/$RealBin&quot; \
  --ppapi-flash-path=\
  &quot;$AppDir/../Versions/&lt;VERSION&gt;/Chromium Framework.framework/Internet Plug-Ins/PepperFlash/PepperFlashPlayer.plugin&quot;\
  --ppapi-flash-version=19.0.0.226
</code></pre>
<!--kg-card-end: markdown--><p>To my surprise this already worked quite well. BUT: as I am aware that an outdated browser with an outdated Flash version is quite a risk I need to take appropriate steps to lock down the browser.</p><h3 id="restricting-and-securing-the-browser">Restricting and securing the browser</h3><p>As I only need to access a very specific set of flash website (internal to the organization) there easy steps to secure the browser:</p><ul><li>Use an allow-list for URLs that the browser will open</li><li>Don't register the browser as a default browser</li><li>Don't register the browser to open any file type of the OS</li><li>Restrict navigation in general</li></ul><p>For the allow-list I chose to use an existing chrome extension and adapt it to my needs and then auto-load it through a launcher option. The extension I based my solution on can be found here: <a href="https://github.com/glitchedmob/Chrome-stay-focused">https://github.com/glitchedmob/Chrome-stay-focused</a> (the pre-built extension is located in the "build" directory. In order to change it from a "block-list" to an "allow-list" approach some changes in the code are necessary.</p><!--kg-card-begin: markdown--><pre><code>class Controller {
    constructor(store, view) {
        this.store = store;
        this.view = view;
        this.blockSites();
    }
    blockSites() {
        let atLeastOneMatch = false;
        for (let site of this.store.sites) {
            if (window.location.href.includes(site)) {
                atLeastOneMatch = true;
            }
        }
        if(!atLeastOneMatch) {
            this.view.addApp();
        }
    }
}
</code></pre>
<!--kg-card-end: markdown--><p>Furthermore I needed to add the allowed URLs to the configuration of the extension. All that was left to do was to package the extension with the browser. A few simple command line options of chromium did the trick:</p><!--kg-card-begin: markdown--><p><code>--load-extension=&quot;$AppDir/../Extension&quot;</code><br>
Also the contents of the extension (content of the &quot;build&quot; folder) needed to be copied there.</p>
<!--kg-card-end: markdown--><p>Last but not least I removed all capabilities of the patchwork browser to register itself as an application to open any sort of document. This had to be done inside the application configuration file:</p><!--kg-card-begin: markdown--><p><code>Chromium.app/Contents/Info.plist</code> where I removed all elements of <code>UTImportedTypeDeclarations</code>.</p>
<!--kg-card-end: markdown--><h2 id="conclusion">Conclusion</h2><p>While I still consider this an imperfect solution to the problem it still checks all the boxes: cost, flexibility and (a minimally) secure. On the other hand some of the pressure to drop flash completely fades - in the positive and negative sense.</p><p>In case you liked this post consider buying me a coffee (so I can write the next one).</p><!--kg-card-begin: html--><script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="germann" data-color="#5F7FFF" data-emoji data-font="Arial" data-text="Buy me a coffee" data-outline-color="#000" data-font-color="#fff" data-coffee-color="#fd0"></script><!--kg-card-end: html-->]]></content:encoded></item></channel></rss>